{"version":3,"sources":["../../src/db/db.js"],"names":["connect","options","mediator","console","log","once","mydb","mysql","createPool","on","getConnection","err","connection","emit"],"mappings":";;;;;;;AAAA;;;;AAEO,IAAMA,OAAO,GAAG,SAAVA,OAAU,CAACC,OAAD,EAASC,QAAT,EAAsB;AAC3C;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AAEAC,EAAAA,QAAQ,CAACG,IAAT,CAAc,YAAd,EAA4B,YAAM;AAChC,QAAMC,IAAI,GAAGC,kBAAMC,UAAN,CAAiBP,OAAjB,CAAb;;AAEAK,IAAAA,IAAI,CAACG,EAAL,CAAQ,YAAR,EAAsB,YAAM;AAAEN,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AAAgC,KAA9D;AACAE,IAAAA,IAAI,CAACG,EAAL,CAAQ,SAAR,EAAmB,YAAM;AAAEN,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AAA+B,KAA1D;AAEAE,IAAAA,IAAI,CAACI,aAAL,CAAmB,UAACC,GAAD,EAAKC,UAAL,EAAoB;AACrC,UAAGD,GAAH,EAAQ;AACNT,QAAAA,QAAQ,CAACW,IAAT,CAAc,UAAd,EAA0BF,GAA1B;AACD,OAFD,MAEO;AACLT,QAAAA,QAAQ,CAACW,IAAT,CAAc,UAAd,EAA0BD,UAA1B;AACD;AACF,KAND;AAQD,GAdD;AAgBD,CApBM","sourcesContent":["import mysql from 'mysql2'\r\n\r\nexport const connect = (options,mediator) => {\r\n  //const mydb = mysql.createPool(options)\r\n  console.log(options)\r\n\r\n  mediator.once('boot.ready', () => {\r\n    const mydb = mysql.createPool(options)\r\n\r\n    mydb.on('connection', () => { console.log('DB Pool oppened') })\r\n    mydb.on('release', () => { console.log('DB Pool closed') })\r\n\r\n    mydb.getConnection((err,connection) => {\r\n      if(err) {\r\n        mediator.emit('db.error', err)\r\n      } else {\r\n        mediator.emit('db.ready', connection)\r\n      }\r\n    })\r\n\r\n  })\r\n\r\n}\r\n"],"file":"db.js"}